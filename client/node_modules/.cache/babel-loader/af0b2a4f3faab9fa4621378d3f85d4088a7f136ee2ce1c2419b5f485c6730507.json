{"ast":null,"code":"import _objectSpread from\"D:/NotesApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/NotesApp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/NotesApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"D:/NotesApp/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/NotesApp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import Button from'react-bootstrap/Button';import Col from'react-bootstrap/Col';import Container from'react-bootstrap/Container';import Modal from'react-bootstrap/Modal';import Row from'react-bootstrap/Row';import ToDoItem from'./TodoItem';import InputArea from'./InputArea';import{useMutation,useQueryClient}from'@tanstack/react-query';import{postToDb}from'../api/CreateToDo';import'./Modal.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ModalComponent(p){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modalShow=_useState4[0],setModalShow=_useState4[1];function addItem(title){if(!title){alert(\"Please add a todo\");}else{setItems(function(prevItems){return[].concat(_toConsumableArray(prevItems),[{title:title,completed:false}]);});}}function deleteItem(id){setItems(function(prevItems){return prevItems.filter(function(item,index){return index!==id;});});}var queryClient=useQueryClient();var addTodoMutation=useMutation({mutationFn:postToDb,onMutate:function(){var _onMutate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(newTodo){var previousTodos;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return queryClient.cancelQueries({queryKey:['todos']});case 2:previousTodos=queryClient.getQueryData(['todos']);queryClient.setQueryData(['todos'],function(old){return[].concat(_toConsumableArray(old),[{todos:_toConsumableArray(newTodo)}]);});return _context.abrupt(\"return\",{previousTodos:previousTodos});case 5:case\"end\":return _context.stop();}},_callee);}));function onMutate(_x){return _onMutate.apply(this,arguments);}return onMutate;}(),// If the mutation fails,\n// use the context returned from onMutate to roll back\nonError:function onError(err,newTodo,context){queryClient.setQueryData(['todos'],context.previousTodos);},// Always refetch after error or success:\nonSettled:function onSettled(){queryClient.invalidateQueries({queryKey:['todos']});}});function addnote(items){if(items.length===0){alert(\"Todo List cannot be empty\");}else{addTodoMutation.mutate(items);}};var MydModalWithGrid=function MydModalWithGrid(props){return/*#__PURE__*/_jsx(Modal,_objectSpread(_objectSpread({},props),{},{\"aria-labelledby\":\"contained-modal-title-vcenter\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",className:\"heading\",children:/*#__PURE__*/_jsx(\"h1\",{children:\" Add a todo list:\"})})}),/*#__PURE__*/_jsxs(Modal.Body,{className:\"show-grid\",children:[/*#__PURE__*/_jsx(Row,{className:\"form\",children:/*#__PURE__*/_jsx(Col,{xs:12,md:12,children:/*#__PURE__*/_jsx(InputArea,{onAdd:addItem})})}),/*#__PURE__*/_jsxs(Row,{children:[items.map(function(todoItem,index){return/*#__PURE__*/_jsx(ToDoItem,{id:index,text:todoItem.title,onChecked:deleteItem},index);}),\";\"]})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){addnote(items);props.onHide();},children:\"Add\"})})]})}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"addButton\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",onClick:function onClick(){return setModalShow(true);},children:\"+ Add  new Todo's\"}),/*#__PURE__*/_jsx(MydModalWithGrid,{show:modalShow,onHide:function onHide(){return setModalShow(false);}})]});}export default ModalComponent;","map":{"version":3,"names":["React","useState","Button","Col","Container","Modal","Row","ToDoItem","InputArea","useMutation","useQueryClient","postToDb","jsx","_jsx","jsxs","_jsxs","ModalComponent","p","_useState","_useState2","_slicedToArray","items","setItems","_useState3","_useState4","modalShow","setModalShow","addItem","title","alert","prevItems","concat","_toConsumableArray","completed","deleteItem","id","filter","item","index","queryClient","addTodoMutation","mutationFn","onMutate","_onMutate","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newTodo","previousTodos","wrap","_callee$","_context","prev","next","cancelQueries","queryKey","getQueryData","setQueryData","old","todos","abrupt","stop","_x","apply","arguments","onError","err","context","onSettled","invalidateQueries","addnote","length","mutate","MydModalWithGrid","props","_objectSpread","children","Header","closeButton","Title","className","Body","xs","md","onAdd","map","todoItem","text","onChecked","Footer","onClick","onHide","variant","show"],"sources":["D:/NotesApp/client/src/components/ModalComponent.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Row from 'react-bootstrap/Row';\r\nimport ToDoItem from './TodoItem';\r\nimport InputArea from './InputArea';\r\nimport {useMutation,useQueryClient}  from '@tanstack/react-query';\r\nimport {postToDb } from '../api/CreateToDo';\r\nimport './Modal.css';\r\n\r\n\r\n\r\nfunction ModalComponent(p){\r\n  const [items, setItems] = useState([]);\r\n  const [modalShow, setModalShow] = useState(false);\r\n\r\nfunction addItem(title) {\r\n  if(!title){alert(\"Please add a todo\");}\r\n  else {setItems(prevItems => {\r\n      return [...prevItems, {title:title, completed:false,}];});}}\r\n\r\n function deleteItem(id) {\r\n    setItems(prevItems => {\r\n      return prevItems.filter((item, index) => {\r\n        return index !== id;\r\n      });\r\n    });\r\n  }\r\n  \r\n  const queryClient = useQueryClient();\r\n  \r\n  const addTodoMutation = useMutation({\r\n    mutationFn:  postToDb,\r\n    onMutate: async (newTodo) => {\r\n     await queryClient.cancelQueries({ queryKey: ['todos'] })\r\n     const previousTodos = queryClient.getQueryData(['todos'])\r\n    queryClient.setQueryData(['todos'], (old) => [...old, {todos:[...newTodo]}])\r\n    return { previousTodos }\r\n  },\r\n  // If the mutation fails,\r\n  // use the context returned from onMutate to roll back\r\n  onError: (err, newTodo, context) => {\r\n    queryClient.setQueryData(['todos'], context.previousTodos)\r\n  },\r\n  // Always refetch after error or success:\r\n  onSettled: () => {\r\n    queryClient.invalidateQueries({ queryKey: ['todos'] })\r\n  },\r\n})\r\n\r\nfunction addnote(items) {\r\n  if(items.length===0) {\r\n    alert(\"Todo List cannot be empty\")\r\n  }\r\n  else {\r\n    addTodoMutation.mutate(items)\r\n  }\r\n  \r\n  };\r\nconst  MydModalWithGrid = (props) => {   \r\n\r\nreturn (\r\n    <Modal {...props} aria-labelledby=\"contained-modal-title-vcenter\" >\r\n      <Container>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\" className='heading'>\r\n        <h1> Add a todo list:</h1>\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body className=\"show-grid\">\r\n        \r\n          <Row className='form'>\r\n            <Col xs={12} md={12}>\r\n         <InputArea onAdd={addItem} />\r\n            </Col>\r\n          </Row>\r\n           <Row>\r\n            { items.map((todoItem, index) => (\r\n             \r\n             <ToDoItem\r\n              id = {index}\r\n              key={index}\r\n              text={todoItem.title}\r\n                onChecked={deleteItem}\r\n                \r\n            />\r\n          ))};\r\n          </Row>\r\n        \r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button onClick={() =>{ addnote(items); props.onHide()}}>Add</Button>\r\n      </Modal.Footer>\r\n      </Container>\r\n    </Modal>\r\n  );\r\n            }\r\nreturn (\r\n   <div className='addButton'>\r\n    \r\n      <Button variant=\"outline-dark\" onClick={() => setModalShow(true)}>\r\n      + Add  new Todo's \r\n      </Button>\r\n\r\n      <MydModalWithGrid show={modalShow} onHide={() => setModalShow(false)}  />\r\n    \r\n    \r\n   \r\n  </div>\r\n\r\n)}\r\nexport default ModalComponent\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}